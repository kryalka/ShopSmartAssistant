# CookiQ: Обзор проекта (КТ-1)

## 1. Команда и распределение обязанностей

В проекте CookiQ участвуют 4 человека, каждый отвечает за конкретную часть разработки:

- Совкова София: Парсер данных с ВкусВилл
  - Интеграция с ВкусВилл API, сбор данных о товарах, их стоимости и наличии.
- Синицина Софья: Телеграм-бот
  - Разработка интерфейса взаимодействия с пользователем через бота.
- Маргарита Иванова: База данных
  - Создание и настройка БД для хранения данных о товарах, обновление корзины и актуализация данных.
- Матвей Хорт: Интеграция с ChatGPT
  - Настройка нейросети для обработки пользовательских запросов и формирования списка продуктов.

## 2. Описание проекта

### Цель
CookiQ — это интеллектуальный помощник, который собирает продуктовую корзину на основе ваших кулинарных предпочтений и бюджета. Просто опишите, что хотите приготовить, например, "хочу борщ на неделю" или "собери корзину на 1000 рублей на двоих человек на 3 дня", и CookiQ подберет нужные продукты и рассчитает их количество. Итоговая корзина формируется в ВкусВилл, где вы легко можете оформить заказ.

### Пользовательский интерфейс
- Запрос продуктов для конкретного блюда или на заданный бюджет.
- Получение готовой корзины товаров с учетом актуальных цен и наличия продуктов на ВкусВилл.
- Мониторинг изменений в корзине, поскольку данные о ценах и наличии обновляются регулярно.

### Функционал
- Пользователь взаимодействует с CookiQ через Телеграм-бота.
- Бот обрабатывает текст запроса, взаимодействует с нейросетью и ВкусВилл API, а затем предоставляет ссылку на корзину в ВкусВилл.

### Пример работы
1. Запрос пользователя через Телеграм.
2. Обработка запроса ChatGPT, составление списка продуктов с учетом количества.
3. Запрос в базу данных и ВкусВилл API для получения актуальных цен и наличия.
4. Ответ пользователю: ссылка на корзину в ВкусВилл для удобного оформления заказа.

## 3. Основные компоненты проекта

### Компоненты системы

- Телеграм-бот: Интерфейс пользователя.
- База данных: Хранение информации о продуктах и корзинах.
- Парсер данных с ВкусВилл: Получение информации о товарах через ВкусВилл API.
- Интеграция ChatGPT: Обработка пользовательских запросов и составление списка продуктов.

## Логика работы бота 

### 1. Инициализация и начало диалога
**Команда /start**: Бот приветствует пользователя и объясняет доступные команды и запросы. Например, выводит сообщение с инструкцией: 

Привет! Я — умный помощник для составления продуктовой корзины. Введите, что хотите приготовить, и я подберу необходимые продукты. Например: "Собери корзину для двух людей на неделю" или "Собери корзину для блинов, учитывая бюджет - 500 рублей".


2. **Обработка команд**:
   - **/help** — справка по использованию бота.
   - **/list** — просмотр текущей корзины.
   - **/new_order** — сделать заказ.
   - **/history** — посмотреть историю заказов.
   - **/repeat_order** — повторить заказ.

### 2. Обработка запроса пользователя

Когда пользователь отправляет запрос, бот выполняет следующие действия:

1. **Запрос к базе данных**:
   - Получаем список товаров с указанием массы и их актуальными ценами.

2. **Запрос к нейросети**:
   - Бот отправляет запрос к API OpenAI GPT-4 для составления перечня необходимых ингредиентов, включая предполагаемую массу продуктов.
   - Пример запроса к GPT-4:
     
     Задача: составить список ингредиентов для борща на неделю, учесть бюджет 1000 рублей.

   - Получив ответ, бот формирует список ссылок на ингредиенты.

3. **Формирование корзины**:
   - Собранные товары добавляются в корзину. GPT-4 следит, чтобы не превышать бюджет, оптимизируя выбор продуктов и предлагая наиболее популярные товары.
   - Если бюджет не позволяет полностью собрать корзину, бот уведомляет пользователя и сообщает минимальную суммарную стоимость продуктов.

### 3. Ответ пользователю и отправка ссылки

После формирования списка ссылок на товары бот отправляет его пользователю.

1. **Формирование сообщения**:
   - Бот отправляет пользователю сообщение с кратким описанием состава корзины и итоговой ценой. 
     
   - Далее спрашивает: "Нужна ли помощь с подробным описанием приготовления блюда?" (если в запросе пользователя фигурирует название блюда).

### 4. Дополнительные функции и обновления

1. **Актуализация корзины**:
   - С помощью парсинга ВкусВилла бот обновляет данные о товарах в базе, чтобы цена и наличие всегда были актуальны.

2. **Сохранение данных в базе**:
   - Бот сохраняет информацию о каждом запросе в базе MySQL, чтобы в дальнейшем анализировать популярные запросы и продукты.

### 5. Обработка ошибок и уведомления

1. **Ошибки связи с API или базой данных**:
   - Если происходит ошибка при обращении к GPT-4, бот уведомляет пользователя и предлагает попробовать позже.


## 5. Репозиторий проекта

- [CookiQ GitHub репозиторий](https://github.com/ggranpiri/AI_product_assistant.git)

## 6. Контакт для связи

- Ссылка на [Telegram-чат проекта](https://t.me/project_ai_product_assistant)
- Совкова София [Telegram](https://t.me/ggranpiri)
- Синицина Софья [Telegram](https://t.me/kryalka)
- Иванова Маргарита [Telegram](https://t.me/lavandamor)
- Хорт Матвей [Telegram](https://t.me/mdkhuni)
